generator client {
  provider = "prisma-client-js"
  output   = "../generated/prisma"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model Profile {
  id        String  @id @default(uuid()) @db.VarChar(36)
  cnpj      String? @unique @db.VarChar(14)
  cpf       String? @unique @db.VarChar(11)
  name      String  @db.VarChar(100)
  cellphone String  @unique @db.VarChar(20)
  phone     String? @db.VarChar(20)
  email     String  @unique @db.VarChar(191)

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  address Address?

  @@index([email])
  @@index([cpf])
  @@index([cnpj])
  @@map("profiles")
}

model Address {
  id           String  @id @default(uuid()) @db.VarChar(36)
  profileId    String  @unique @db.VarChar(36)
  zipcode      String  @db.VarChar(8)
  street       String  @db.VarChar(100)
  number       String  @db.VarChar(10)
  complement   String? @db.VarChar(50)
  neighborhood String  @db.VarChar(100)
  city         String  @db.VarChar(100)
  state        String  @db.VarChar(2)

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  profile Profile @relation(fields: [profileId], references: [id], onDelete: Cascade)

  @@map("addresses")
}
